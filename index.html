<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ТСН.ua — Новини України та світу</title>

    <script src="https://unpkg.com/react@18.2.0/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone@7.25.6/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.css" />
    <script src="https://cdn.jsdelivr.net/npm/plyr@3.7.8/dist/plyr.polyfilled.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f3f4f6; color: #1a1a1a; margin: 0; }
        .tsn-logo { font-weight: 1000; letter-spacing: -0.05em; }
        .card-title:hover { text-decoration: underline; text-decoration-color: #e30613; }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #e30613; border-radius: 10px; }
        .plyr { border-radius: 1rem; overflow: hidden; }
    </style>
</head>
<body>
    <div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

/* ================= DATABASE ================= */
const DATABASE = {
    mainStory: {
        id: 'main',
        category: 'Україна',
        title: 'П’ятий рік повномасштабної війни: чи стане він останнім — два основних сценарії',
        img: 'https://img.tsn.ua/cached/853/tsn-1284f5ef/thumbs/1920x600/b3/53/78727e29b1e58f5e120be37a52dd53b3.jpeg',
        fullText: ["Війна в Україні триває вже п'ятий рік...", "Експерти аналізують 2026 рік как вирішальний."]
    },
    news: [
        { id: 1, time: '13:00', cat: 'Херсон', type: 'article', title: 'Ситуація в Херсоні: головні новини міста', img: 'https://img.tsn.ua/cached/323/tsn-0b4bc102/thumbs/1200x630/8c/5e/56696d155f95fdeaa910acc977945e8c.webp', fullText: ['Деталі подій у Херсоні...'] },
        { id: 2, time: '19:18', cat: 'Ефір', type: 'video', title: 'Запис прямого ефіру від 25 лютого 2026', videoSrc: 'Videos/2026-02-25 19-18-16.mkv', poster: 'https://tsn.ua/static/og/uk/online.png', fullText: ['Повний випуск новин.'] },
        { id: 3, time: '16:00', cat: 'Ефір', type: 'video', title: 'Випуск новин: Події 26 лютого 2026', videoSrc: 'Videos/2026-02-26 16-00-35.mp4', poster: 'https://tsn.ua/static/og/uk/online.png', fullText: ['Денний випуск.'] }
    ]
};

/* ================= SVG ICONS ================= */
const Icon = ({ name, size = 18, className = "" }) => {
    const icons = {
        search: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>,
        play: <svg width={size} height={size} viewBox="0 0 24 24" fill="currentColor" className={className}><polygon points="5 3 19 12 5 21 5 3"/></svg>,
        arrowLeft: <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="19" y1="12" x2="5" y2="12"/><polyline points="12 19 5 12 12 5"/></svg>
    };
    return icons[name] || null;
};

/* ================= PLYR COMPONENT ================= */
const VideoPlayer = ({ src, poster }) => {
    const videoRef = useRef(null);

    useEffect(() => {
        let player;
        if (videoRef.current && window.Plyr) {
            player = new window.Plyr(videoRef.current, {
                controls: ['play-large', 'play', 'progress', 'current-time', 'mute', 'volume', 'fullscreen'],
                tooltips: { controls: true, seek: true }
            });
        }
        return () => { if (player) player.destroy(); };
    }, [src]);

    return (
        <div className="mb-8 shadow-2xl rounded-2xl bg-black overflow-hidden border-4 border-gray-900">
            <video ref={videoRef} playsInline poster={poster}>
                <source src={src} type="video/mp4" />
            </video>
        </div>
    );
};

/* ================= PAGES ================= */
const HomePage = ({ onOpen }) => (
    <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
        <div className="lg:col-span-2 space-y-8">
            <div className="relative h-[450px] rounded-3xl overflow-hidden cursor-pointer group shadow-xl" onClick={() => onOpen(DATABASE.mainStory)}>
                <img src={DATABASE.mainStory.img} className="w-full h-full object-cover group-hover:scale-105 transition-all duration-700" />
                <div className="absolute inset-0 bg-gradient-to-t from-black via-transparent flex flex-col justify-end p-8">
                    <span className="bg-red-600 text-white px-3 py-1 text-xs font-black w-fit mb-4 uppercase">Головне</span>
                    <h2 className="text-white text-4xl font-black group-hover:underline">{DATABASE.mainStory.title}</h2>
                </div>
            </div>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {DATABASE.news.map(item => (
                    <div key={item.id} className="bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-md cursor-pointer group" onClick={() => onOpen(item)}>
                        <div className="h-48 overflow-hidden relative">
                            <img src={item.img || item.poster} className="w-full h-full object-cover group-hover:scale-110 transition-transform" />
                            {item.type === 'video' && <div className="absolute inset-0 flex items-center justify-center bg-black/30"><Icon name="play" size={48} className="text-white" /></div>}
                        </div>
                        <div className="p-4">
                            <div className="flex justify-between text-[10px] font-black text-red-600 uppercase mb-2"><span>{item.cat}</span><span>{item.time}</span></div>
                            <h3 className="font-bold card-title">{item.title}</h3>
                        </div>
                    </div>
                ))}
            </div>
        </div>
        <aside className="bg-white p-6 rounded-3xl shadow-sm h-fit">
            <h2 className="text-xl font-black mb-4 flex items-center"><span className="w-2 h-2 bg-red-600 rounded-full mr-2 animate-pulse"></span>Останні новини</h2>
            <div className="space-y-4 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                {DATABASE.news.map((item, i) => (
                    <div key={i} className="border-b pb-3 cursor-pointer" onClick={() => onOpen(item)}>
                        <div className="text-red-600 text-xs font-bold">{item.time}</div>
                        <p className="text-sm font-bold leading-tight">{item.title}</p>
                    </div>
                ))}
            </div>
        </aside>
    </div>
);

const App = () => {
    const [view, setView] = useState({ page: 'home', data: null });

    return (
        <div className="min-h-screen">
            <header className="bg-white border-b-4 border-red-600 sticky top-0 z-50 shadow-md">
                <div className="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
                    <div className="text-4xl font-black cursor-pointer tsn-logo" onClick={() => setView({ page: 'home' })}>
                        ТСН<span className="text-red-600">.</span>UA
                    </div>
                    <button className="bg-red-600 text-white p-2 rounded-lg"><Icon name="search" size={20} /></button>
                </div>
            </header>

            <main className="max-w-7xl mx-auto p-6">
                {view.page === 'home' ? (
                    <HomePage onOpen={(data) => setView({ page: 'article', data })} />
                ) : (
                    <div className="max-w-4xl mx-auto py-6 animate-slide-up">
                        <button onClick={() => setView({ page: 'home' })} className="mb-6 flex items-center text-red-600 font-bold uppercase text-xs">
                            <Icon name="arrowLeft" className="mr-2" /> Назад до новин
                        </button>
                        <h1 className="text-4xl md:text-5xl font-black mb-8">{view.data.title}</h1>
                        {view.data.type === 'video' ? (
                            <VideoPlayer src={view.data.videoSrc} poster={view.data.poster} />
                        ) : (
                            <img src={view.data.img} className="w-full rounded-3xl mb-10 shadow-xl" />
                        )}
                        <div className="space-y-6 text-lg text-gray-700 leading-relaxed">
                            {view.data.fullText.map((p, i) => <p key={i}>{p}</p>)}
                        </div>
                        
                        {/* КНОПКИ СОЦСЕТЕЙ */}
                        <div className="mt-12 p-8 bg-gray-900 rounded-3xl text-white">
                            <h4 className="font-black text-xl mb-6 uppercase tracking-widest text-center md:text-left">Приєднуйтесь до нас</h4>
                            <div className="flex flex-col md:flex-row gap-4">
                                <a href="https://discord.gg/fb4UfWkE2k" target="_blank" rel="noopener noreferrer" className="flex-1 bg-[#5865F2] hover:bg-[#4752C4] text-center py-4 rounded-xl font-bold transition-all transform hover:scale-105">Discord</a>
                                <a href="https://www.youtube.com/@tsn_ku" target="_blank" rel="noopener noreferrer" className="flex-1 bg-[#FF0000] hover:bg-[#CC0000] text-center py-4 rounded-xl font-bold transition-all transform hover:scale-105">YouTube</a>
                            </div>
                        </div>
                    </div>
                )}
            </main>
        </div>
    );
};

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
</script>
</body>
</html>
