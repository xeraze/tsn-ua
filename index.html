<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ТСН.ua — Новини України та світу</title>

    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Video.js -->
    <link href="https://vjs.zencdn.net/8.5.2/video-js.css" rel="stylesheet" />
    <script src="https://vjs.zencdn.net/8.5.2/video.min.js"></script>

  <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #f9fafb; color: #1a1a1a; margin: 0; }
        .tsn-logo { font-weight: 1000; letter-spacing: -0.05em; }
        .animate-live { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .prose p { margin-bottom: 1.5rem; line-height: 1.8; font-size: 1.125rem; color: #374151; }
        .line-clamp-3 { display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
        .card-title:hover {text-decoration-line: underline;text-decoration-color: red;}

    </style>
    
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef } = React;

/* ================= DATABASE ================= */
const DATABASE = {
    mainStory: {
        id: '3028130',
        category: 'Україна',
        type: 'article',
        title: 'П’ятий рік повномасштабної війни: чи стане він останнім — два основних сценарії',
        desc: 'Військові експерти розібрали ключові фактори...',
        img: 'https://img.tsn.ua/cached/853/tsn-1284f5ef/thumbs/1920x600/b3/53/78727e29b1e58f5e120be37a52dd53b3.jpeg',
        fullText: [
            "Війна в Україні триває вже п'ятий рік.",
            "Перший сценарій — війна на виснаження.",
            "Другий — дипломатичний тиск.",
            "2025 рік стане вирішальним."
        ]
    },

    news: [
        {
            id: 1,
            time: '13:00',
            cat: 'Херсон',
            type: 'article',
            title: 'Тестовий заголовок новини з Херсона',
            img: 'https://img.tsn.ua/cached/323/tsn-0b4bc102/thumbs/1200x630/8c/5e/56696d155f95fdeaa910acc977945e8c.webp',
            fullText: [
                'це тестовий текст новини з Херсона.',
                'Він використовується для демонстрації структури новинного матеріалу.',
                'У реальних новинах тут буде детальний опис подій, цитати очевидців та експертів, а також аналіз ситуації.',
                'Ця новина може містити інформацію про поточні події, військові дії, гуманітарну ситуацію та інші важливі аспекти життя в Херсоні під час війни.',
                'Мета цієї новини — надати читачам повну картину того, що відбувається в регіоні, та допомогти їм краще розуміти контекст подій.'
            ]
        },
        {
            id: 2,
            time: '19:18',
            cat: 'Запис трансляції',
            type: 'video',
            title: 'Відео запису трансляції з 25 лютого 2026 року',
            poster: 'https://tsn.ua/static/og/uk/online.png',
            videoSrc: 'https://files.fm/f/2ur35n98ch',
            fullText: [
                'У мережі зʼявилися відеокадри удару.',
                'Видно значні руйнування.'
            ]
        },
        {
            id: 3,
            time: '16:00',
            cat: 'Запис трансляції',
            type: 'video',
            title: 'Відео запису трансляції з 26 лютого 2026 року',
            poster: 'https://tsn.ua/static/og/uk/online.png',
            videoSrc: 'https://files.fm/f/5nxybnx3ar',
            fullText: [
                'У мережі зʼявилися відеокадри удару.',
                'Видно значні руйнування.'
            ]
        }

    ]
};

/* ================= ICON ================= */
const Icon = ({ name, size = 18, className = "" }) => (
    <i data-lucide={name} style={{ width: size, height: size }} className={className}></i>
);

/* ================= VIDEO PLAYER ================= */
const VideoJSPlayer = ({ src, poster }) => {
    const videoRef = useRef(null);
    const playerRef = useRef(null);

    useEffect(() => {
        if (!playerRef.current && videoRef.current) {
            playerRef.current = videojs(videoRef.current, {
                controls: true,
                fluid: true,
                preload: 'auto',
                poster
            });
        }
        return () => {
            if (playerRef.current) {
                playerRef.current.dispose();
                playerRef.current = null;
            }
        };
    }, []);

    return (
        <div className="rounded-[2.5rem] overflow-hidden shadow-xl mb-12">
            <video ref={videoRef} className="video-js vjs-big-play-centered">
                <source src={src} type="video/mp4" />
            </video>
        </div>
    );
};

/* ================= HOME ================= */
const HomePage = ({ onOpenArticle }) => (
    <div className="space-y-12">

        <section
            className="relative h-[450px] rounded-[2.5rem] overflow-hidden cursor-pointer"
            onClick={() => onOpenArticle(DATABASE.mainStory)}
        >
            <img src={DATABASE.mainStory.img} className="absolute inset-0 w-full h-full object-cover"/>
            <div className="absolute inset-0 bg-gradient-to-t from-black p-10 flex flex-col justify-end">
                <h1 className="text-white text-4xl font-black">{DATABASE.mainStory.title}</h1>
            </div>
        </section>

        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
            {[...DATABASE.news]
                .sort((a, b) => {
                    const [aH, aM] = a.time.split(':').map(Number);
                    const [bH, bM] = b.time.split(':').map(Number);
                    return (bH * 60 + bM) - (aH * 60 + aM);
                })
                .map(item => (
                <div
                    key={item.id}
                    onClick={() => onOpenArticle(item)}
                    className="bg-white rounded-3xl shadow hover:shadow-xl cursor-pointer"
                >
                    <img
                        src={item.poster || item.img || `https://picsum.photos/seed/${item.id}/600/400`}
                        className="rounded-t-3xl w-full h-56 object-cover"
                    />
                    <div className="p-5">
                        <div className="flex justify-between text-xs font-bold mb-2">
                            <span className="text-red-600">{item.cat}</span>
                            <span className="text-gray-400">{item.time}</span>
                        </div>
                        <h3 className="font-bold text-lg">{item.title}</h3>
                    </div>
                </div>
            ))}
        </div>
    </div>
);

/* ================= ARTICLE ================= */
const ArticlePage = ({ article }) => (
    <div className="max-w-4xl mx-auto py-10">
        <h1 className="text-5xl font-black mb-8">{article.title}</h1>

        {article.type === 'video' ? (
            <VideoJSPlayer src={article.videoSrc} poster={article.poster}/>
        ) : (
            <img src={article.img} className="rounded-[2.5rem] mb-12 shadow-xl"/>
        )}

        <div className="prose">
            {article.fullText?.map((p,i)=><p key={i}>{p}</p>)}
        </div>
    </div>
);

/* ================= APP ================= */
const App = () => {
    const [view, setView] = useState({ page:'home', data:null });

    useEffect(() => {
        if (window.lucide) window.lucide.createIcons();
    }, [view]);

    return (
        <>
            <header className="bg-white border-b-8 border-red-600 p-4 font-black cursor-pointer"
                onClick={()=>setView({page:'home',data:null})}>
                ТСН<span className="text-red-600">.</span>UA
            </header>

            <main className="max-w-7xl mx-auto p-6">
                {view.page === 'home'
                    ? <HomePage onOpenArticle={(data)=>setView({page:'article',data})}/>
                    : <ArticlePage article={view.data}/>
                }
            </main>
        </>
    );
};

ReactDOM.createRoot(document.getElementById('root')).render(<App />);
</script>
</body>
</html>
